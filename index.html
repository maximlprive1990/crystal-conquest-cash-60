<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF‑8" />
  <meta name="viewport" content="width=device‑width, initial‑scale=1.0" />
  <title>Crystal Conquest Cash (TON Miner Game)</title>
  <style>
    body {
      background: #050517;
      color: #0ff;
      font-family: sans-serif;
      text-align: center;
    }
    .btn, .upgrade { 
      background: #0ff; color: #050517; border: 2px solid #f0f; 
      padding:10px; margin:5px; cursor:pointer; 
    }
    .neon {
      text-shadow: 0 0 8px #0ff, 0 0 20px #0ff;
    }
    #energy-bar { width:300px; height:20px; background:#222; margin:10px auto; }
    #energy-fill { width:0; height:100%; background:#0ff; }
    #wallet { margin:20px; }
    .slot { border:2px solid #0ff; padding:10px; margin:10px; display:inline-block; }
  </style>
</head>
<body>
  <h1 class="neon">Crystal Conquest Cash - Miner TON</h1>
  <div id="energy-bar"><div id="energy-fill"></div></div>
  <button id="clickBtn" class="btn neon">Click to mine</button>
  <div id="stats">
    <p>Dogs: <span id="dogs">0.000</span> | NOT: <span id="not">0.000</span> | Exp: <span id="exp">0</span></p>
  </div>
  <div id="upgrades">
    <button class="upgrade neon" data-type="double-click">Double click</button>
    <button class="upgrade neon" data-type="double-exp">Double exp</button>
    <button class="upgrade neon" data-type="faster-energy">Faster energy regen</button>
  </div>
  <div id="faucet">
    <h2 class="neon">Faucet crypto</h2>
    <button id="faucetBtn" class="btn">Claim faucet</button>
    <p id="faucetMsg"></p>
  </div>
  <div id="withdraw">
    <h2 class="neon">Retrait</h2>
    <button class="btn" id="withdrawDogs">Retirer Dogs</button>
    <button class="btn" id="withdrawNot">Retirer NOT</button>
    <p id="withdrawMsg"></p>
  </div>
  <div id="slots">
    <h2 class="neon">Cultivation Slots</h2>
    <div id="slotsContainer">
      <!-- 4 slots -->
      <div class="slot" data-installed="false">Slot 1 (libre)</div>
      <div class="slot" data-installed="false">Slot 2 (libre)</div>
      <div class="slot" data-installed="false">Slot 3 (libre)</div>
      <div class="slot" data-installed="false">Slot 4 (libre)</div>
    </div>
    <button id="buySlot" class="btn neon">Acheter slot (Dogs ou NOT)</button>
  </div>

<script>
let dogs=0, nott=0, exp=0;
let energy=100, energyMax=100;
let dblClick=false, dblExp=false, energySpeed=1;
let slotPrices = {slot1:1000, slot2:2000, slot3:4000, slot4:8000};

function updateUI(){
  document.getElementById('dogs').textContent=dogs.toFixed(3);
  document.getElementById('not').textContent=nott.toFixed(3);
  document.getElementById('exp').textContent=exp;
  document.getElementById('energy-fill').style.width=(energy/energyMax*100)+'%';
}
function regenEnergy(){
  energy = Math.min(energyMax, energy + 0.5*energySpeed);
  updateUI();
}
setInterval(regenEnergy, 1000);

document.getElementById('clickBtn').addEventListener('click', ()=>{
  if(energy<10) return alert("Pas assez d'energy");
  energy -=10;
  let gainDogs = (Math.random()*(0.43-0.001)+0.001);
  let gainNot = (Math.random()*(0.43-0.001)+0.001);
  if(dblClick){ gainDogs*=2; gainNot*=2; }
  dogs += gainDogs;
  nott += gainNot;
  let gainExp = 0.75;
  if(dblExp) gainExp*=2;
  exp += gainExp;
  updateUI();
});

document.querySelectorAll('.upgrade').forEach(btn=>{
  btn.onclick = ()=>{
    let type = btn.dataset.type;
    let cost = 100; // placeholder
    if(dogs >= cost){
      dogs -= cost;
      if(type==='double-click') dblClick = true;
      if(type==='double-exp') dblExp = true;
      if(type==='faster-energy') energySpeed = 2;
      updateUI();
      btn.disabled=true;
    } else alert("Pas assez de Dogs pour upgrade");
  };
});

document.getElementById('faucetBtn').addEventListener('click', ()=>{
  if(Math.random()<0.0238){
    document.getElementById('faucetMsg').textContent="Bravo! Bonus de 25 USD gagné !";
    // convert USD to dogs+not roughly, fictif
    dogs += 25; nott +=25;
  } else {
    let amt = (Math.random()*(2.75-0.01)+0.01);
    document.getElementById('faucetMsg').textContent="Faucet gagné: "+amt.toFixed(3);
    dogs += amt/2;
    nott += amt/2;
  }
  updateUI();
});

document.getElementById('withdrawDogs').onclick=()=>{
  if(dogs>=550000){
    const fee=50000;
    dogs -= fee;
    dogs -= 550000;
    document.getElementById('withdrawMsg').textContent = "Dogs retirés, fee payé";
  } else alert("Besoin de 550 000 Dogs pour retrait");
  updateUI();
};
document.getElementById('withdrawNot').onclick=()=>{
  if(nott>=750000){
    const fee=50000;
    nott -= fee;
    nott -= 750000;
    document.getElementById('withdrawMsg').textContent = "NOT retirés, fee payé";
  } else alert("Besoin de 750 000 NOTN pour retrait");
  updateUI();
};

document.getElementById('buySlot').onclick=()=>{
  let free = [...document.querySelectorAll('.slot')].find(s=>s.dataset.installed==='false');
  if(!free) return alert("Tous les slots achetés");
  let price = slotPrices[free.textContent.split(' ')[1].toLowerCase()];
  if(dogs >= price){
    dogs -= price;
    free.dataset.installed='true';
    free.textContent = free.textContent + " (acheté)";
    updateUI();
  } else alert("Pas assez de Dogs");
};
updateUI();
</body>
</html>
